<?php

abstract class FusionBase
{
	private $_parent;						// FusionMain
	private $_connections;					// DBコネクション
	private $_redirectUrl;					// 処理後にリダイレクトさせたい場合にURLを格納しておく

	//--------------------------------------------------------------------------
	// FusionBase::__construct
	//--------------------------------------------------------------------------
	// FusionBaseコンストラクタ
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	public function __construct($parent)
	{
		// コンストラクタ引数をメンバに登録する
		$this->_parent						= $parent;				// FusionMain

		// メンバ変数の初期化
		$this->_returnValues				= array();				// 戻り値(連想配列)
		$this->_redirectUrl					= "";					// 処理後にリダイレクトさせたい場合のURL
	}

	//--------------------------------------------------------------------------
	// FusionBase::getParent
	//--------------------------------------------------------------------------
	// 
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	protected function getParent()
	{
		return $this->_parent;
	}

	//--------------------------------------------------------------------------
	// FusionBase::getNowAction
	//--------------------------------------------------------------------------
	// 
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	protected function getNowAction()
	{
		return $this->_parent->getNowAction();
	}

	//--------------------------------------------------------------------------
	// FusionBase::getParentAction
	//--------------------------------------------------------------------------
	// 
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	protected function getParentAction()
	{
		return $this->_parent->getParentAction();
	}

	//--------------------------------------------------------------------------
	// FusionBase::addReturnValue
	//--------------------------------------------------------------------------
	// 
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	protected function addVariable($name, $value)
	{
		$this->_parent->addVariable($name, $value);
	}
	protected function addReturnValue($name, $value)
	{
		$this->_parent->addVariable($name, $value);
	}

	//--------------------------------------------------------------------------
	// FusionBase::setReturnValue
	//--------------------------------------------------------------------------
	// 
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	protected function setVariable($name, $value)
	{
		$this->addVariable($name, $value);
	}
	protected function setReturnValue($name, $value)
	{
		$this->addVariable($name, $value);
	}

	//--------------------------------------------------------------------------
	// FusionBase::setRedirectUrl
	//--------------------------------------------------------------------------
	// 
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	protected function setRedirectUrl($redirectUrl)
	{
		$this->_redirectUrl					= $redirectUrl;
	}

	//--------------------------------------------------------------------------
	// FusionBase::getRedirectUrl
	//--------------------------------------------------------------------------
	// 
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	public function getRedirectUrl()
	{
		return $this->_redirectUrl;
	}

	//--------------------------------------------------------------------------
	// FusionBase::getMessage
	//--------------------------------------------------------------------------
	// 
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	protected function getMessage($id)
	{
		return $this->_parent->getMessage($id);
	}

	//--------------------------------------------------------------------------
	// FusionBase::getConnection
	//--------------------------------------------------------------------------
	// 
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	protected function getDB($name)
	{
		return $this->_parent->getDB($name);
	}

	//--------------------------------------------------------------------------
	// FusionBase::getParameter
	//--------------------------------------------------------------------------
	// 
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	protected function getParameter($name)
	{
		return $this->_parent->getParameter($name);
	}

	//--------------------------------------------------------------------------
	// FusionBase::getParam
	//--------------------------------------------------------------------------
	// 上記getParamterのラッパーメソッド
	// 記述が面倒な人向けのメソッド
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	protected function getParam($name)
	{
		return $this->getParameter($name);
	}

	//--------------------------------------------------------------------------
	// FusionBase::init (abstract)
	//--------------------------------------------------------------------------
	// 初期処理
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	abstract public function init();

	//--------------------------------------------------------------------------
	// FusionBase::release (abstract)
	//--------------------------------------------------------------------------
	// 終了処理
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	abstract public function release();

	//--------------------------------------------------------------------------
	// FusionBase::trace
	//--------------------------------------------------------------------------
	// トレースログの出力
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	public function trace($logMessage)
	{
		$this->_parent->trace($logMessage);
	}

	//--------------------------------------------------------------------------
	// FusionBase::debug
	//--------------------------------------------------------------------------
	// デバッグログの出力
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	public function debug($logMessage)
	{
		$this->_parent->debug($logMessage);
	}

	//--------------------------------------------------------------------------
	// FusionBase::info
	//--------------------------------------------------------------------------
	// インフォメーションログの出力
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	public function info($logMessage)
	{
		$this->_parent->info($logMessage);
	}

	//--------------------------------------------------------------------------
	// FusionBase::warn
	//--------------------------------------------------------------------------
	// ワーニングログの出力
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	public function warn($logMessage)
	{
		$this->_parent->warn($logMessage);
	}

	//--------------------------------------------------------------------------
	// FusionBase::error
	//--------------------------------------------------------------------------
	// エラーログの出力
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	public function error($logMessage)
	{
		$this->_parent->error($logMessage);
	}

	//--------------------------------------------------------------------------
	// FusionBase::fatal
	//--------------------------------------------------------------------------
	// 致命的エラーの出力
	// 
	// 
	// 
	// 
	//--------------------------------------------------------------------------
	public function fatal($logMessage)
	{
		$this->_parent->fatal($logMessage);
	}
}
?>
